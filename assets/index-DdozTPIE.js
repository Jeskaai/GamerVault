(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const p=[{id:1,name:"RTX 5090 Ti FE",price:2199,category:"GPU",image:"/assets/img/1.jpg"},{id:2,name:"Ryzen 9 9950X",price:699,category:"CPU",image:"/assets/img/2.jpg"},{id:3,name:"32GB DDR5 7200MHz",price:180,category:"RAM",image:"/assets/img/3.jpg"},{id:4,name:"Monitor 4K 240Hz OLED",price:1299,category:"DISPLAY",image:"/assets/img/4.jpg"},{id:5,name:"SSD 4TB Gen5 NVMe",price:450,category:"STORAGE",image:"/assets/img/5.jpg"},{id:6,name:"Liquid Cooling 360mm",price:220,category:"COOLING",image:"/assets/img/6.jpg"},{id:7,name:"Keyboard HE Magnetic",price:190,category:"PERIPHERALS",image:"/assets/img/7.jpg"},{id:8,name:"Mouse Ultra-light 8K",price:140,category:"PERIPHERALS",image:"/assets/img/8.jpg"},{id:9,name:"Case Full Tower Glass",price:280,category:"CASE",image:"/assets/img/9.jpg"}];let s=[],r=JSON.parse(localStorage.getItem("currentUser"));const c=()=>{const n=new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3");n.volume=.1,n.play().catch(()=>{})};window.updateOrderStatus=(n,a)=>{let e=JSON.parse(localStorage.getItem("orders")||"[]");e=e.map(t=>t.id===n?{...t,status:a}:t),localStorage.setItem("orders",JSON.stringify(e)),c(),alert(`Orden #${n} actualizada a: ${a}`),d("ADMIN")};document.getElementById("enter-btn").onclick=()=>{const n=document.getElementById("login-name").value,a=document.getElementById("login-email").value,e=document.getElementById("login-role").value;if(!n||!a)return alert("Ingresa tus credenciales.");r={name:n,email:a,role:e,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n}`,address:"",payment:""},localStorage.setItem("currentUser",JSON.stringify(r)),g()};window.saveProfile=()=>{const n=document.getElementById("prof-name").value,a=document.getElementById("prof-address").value,e=document.getElementById("prof-card").value,t=document.getElementById("prof-file"),o=i=>{r={...r,name:n,address:a,avatar:i||r.avatar,payment:e?`VISA **** ${e.slice(-4)}`:r.payment},localStorage.setItem("currentUser",JSON.stringify(r)),location.reload()};if(t.files&&t.files[0]){const i=new FileReader;i.onload=l=>o(l.target.result),i.readAsDataURL(t.files[0])}else o()};const g=()=>{r&&(document.getElementById("login-screen").style.display="none",document.getElementById("user-name").innerText=r.name,document.getElementById("user-avatar").src=r.avatar,document.getElementById("btn-admin").style.display=r.role==="admin"?"inline-block":"none",d("STORE"))};window.addToCart=n=>{const a=p.find(e=>e.id===Number(n));a&&(c(),s.push({...a,cartId:Date.now()+Math.random()}),m(),document.getElementById("cart-panel").classList.add("active"))};const m=()=>{const n=document.getElementById("cart-items"),a=s.reduce((e,t)=>e+t.price,0);n.innerHTML=s.map(e=>`<div class="cart-item"><span>${e.name}</span><div><strong>$${e.price}</strong> <button onclick="removeFromCart(${e.cartId})" class="delete-btn">‚úï</button></div></div>`).join(""),document.getElementById("tax-val").innerText=`$${(a*.14).toFixed(2)}`,document.getElementById("total-val").innerText=`$${(a*1.14).toFixed(2)}`};window.deployOrder=()=>{if(s.length===0)return alert("Rig vac√≠o.");if(!r.address)return alert("Configura tu direcci√≥n en PERFIL."),window.openProfile();const n=JSON.parse(localStorage.getItem("orders")||"[]"),a={id:Math.floor(Math.random()*9e3)+1e3,userName:r.name,userEmail:r.email,userAvatar:r.avatar,address:r.address,payment:r.payment,date:new Date().toLocaleString(),items:[...s],total:s.reduce((e,t)=>e+t.price,0)*1.14,status:"Preparando"};n.push(a),localStorage.setItem("orders",JSON.stringify(n)),s=[],m(),d("MY RIG")};const d=n=>{const a=document.getElementById("content-area");if(document.getElementById("cart-panel").classList.remove("active"),n==="STORE")a.innerHTML=`<h1 class="neon-text">Elite Components</h1><div class="grid">${p.map(e=>`
            <div class="p-card">
                <div class="p-img-container"><img src="${e.image}" class="p-img"></div>
                <div class="p-badge">${e.category}</div>
                <h3>${e.name}</h3><p class="p-price">$${e.price}</p>
                <button class="btn-primary" onclick="addToCart(${e.id})">A√ëADIR AL RIG</button>
            </div>`).join("")}</div>`;else if(n==="MY RIG"){const e=JSON.parse(localStorage.getItem("orders")||"[]").filter(t=>t.userEmail===r.email);a.innerHTML='<h1 class="neon-text">Mi Historial</h1>'+e.reverse().map(t=>`
            <div class="p-card" style="display:flex; justify-content:space-between; margin-bottom:10px; align-items:center;">
                <div>
                    <h3>ORDEN #${t.id}</h3>
                    <p>Estado: <span style="color:var(--neon-cyan); font-weight:800;">${t.status.toUpperCase()}</span></p>
                    <p style="font-size:0.7rem; color:var(--text-dim);">${t.date}</p>
                </div>
                <button onclick="viewOrderDetails(${t.id})" class="btn-primary" style="width:auto; padding:5px 15px;">DETALLES</button>
            </div>`).join("")}else if(n==="ADMIN"&&r.role==="admin"){const e=JSON.parse(localStorage.getItem("orders")||"[]");a.innerHTML=`<h1 class="neon-text">Admin Hub</h1><div class="grid">${e.reverse().map(t=>`
            <div class="p-card">
                <div style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
                    <img src="${t.userAvatar}" style="width:35px; height:35px; border-radius:50%; object-fit:cover; border:1px solid var(--neon-magenta);">
                    <h3>${t.userName}</h3>
                </div>
                <p style="font-size:0.7rem; margin-bottom:10px;">ID: #${t.id} | $${t.total.toFixed(2)}</p>
                
                <label style="font-size:0.6rem; color:var(--neon-cyan);">ACTUALIZAR ESTADO:</label>
                <select onchange="updateOrderStatus(${t.id}, this.value)" class="input-futuristic" style="padding:5px; font-size:0.8rem; margin-top:5px;">
                    <option value="Preparando" ${t.status==="Preparando"?"selected":""}>PREPARANDO</option>
                    <option value="Enviado" ${t.status==="Enviado"?"selected":""}>ENVIADO</option>
                    <option value="Entregado" ${t.status==="Entregado"?"selected":""}>ENTREGADO</option>
                </select>
                
                <button onclick="viewOrderDetails(${t.id})" class="btn-primary" style="margin-top:10px; font-size:0.7rem; padding:8px;">VER LOG√çSTICA</button>
            </div>`).join("")}</div>`}};window.viewOrderDetails=n=>{const e=JSON.parse(localStorage.getItem("orders")||"[]").find(t=>t.id===n);document.getElementById("modal-body").innerHTML=`
        <div style="background:rgba(0,0,0,0.4); padding:10px; border-radius:10px; margin-bottom:15px; font-size:0.8rem; border:1px solid var(--neon-cyan);">
            <p>üìç DIRECCI√ìN: ${e.address}</p>
            <p>üí≥ PAGO: ${e.payment||"CR√âDITO GAL√ÅCTICO"}</p>
            <p>üõ∞Ô∏è ESTADO: <strong>${e.status.toUpperCase()}</strong></p>
        </div>`+e.items.map(t=>`<div style="display:flex; justify-content:space-between; margin-top:5px;"><span>${t.name}</span><strong>$${t.price}</strong></div>`).join(""),document.getElementById("modal-title").innerText=`ORDEN #${e.id}`,document.getElementById("modal-footer-info").innerHTML=`<h3 style="color:var(--neon-magenta)">TOTAL: $${e.total.toFixed(2)}</h3>`,document.getElementById("order-modal").style.display="flex"};window.toggleCart=()=>{c(),document.getElementById("cart-panel").classList.toggle("active")};window.openProfile=()=>{c(),document.getElementById("prof-name").value=r.name,document.getElementById("prof-address").value=r.address||"",document.getElementById("profile-modal").style.display="flex"};window.closeProfile=()=>document.getElementById("profile-modal").style.display="none";window.closeModal=()=>document.getElementById("order-modal").style.display="none";window.removeFromCart=n=>{c(),s=s.filter(a=>a.cartId!==n),m()};document.getElementById("btn-shop").onclick=()=>d("STORE");document.getElementById("btn-orders").onclick=()=>d("MY RIG");document.getElementById("btn-profile").onclick=window.openProfile;document.getElementById("btn-admin").onclick=()=>d("ADMIN");document.getElementById("deploy-btn").onclick=window.deployOrder;document.getElementById("logout-btn").onclick=()=>{localStorage.removeItem("currentUser"),location.reload()};r&&g();
