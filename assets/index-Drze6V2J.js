(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();const g=[{id:1,name:"RTX 5090 Ti FE",price:2199,category:"GPU",image:"assets/img/1.jpg"},{id:2,name:"Ryzen 9 9950X",price:699,category:"CPU",image:"assets/img/2.jpg"},{id:3,name:"32GB DDR5 7200MHz",price:180,category:"RAM",image:"assets/img/3.jpg"},{id:4,name:"Monitor 4K 240Hz OLED",price:1299,category:"DISPLAY",image:"assets/img/4.jpg"},{id:5,name:"SSD 4TB Gen5 NVMe",price:450,category:"STORAGE",image:"assets/img/5.jpg"},{id:6,name:"Liquid Cooling 360mm",price:220,category:"COOLING",image:"assets/img/6.jpg"},{id:7,name:"Keyboard HE Magnetic",price:190,category:"PERIPHERALS",image:"assets/img/7.jpg"},{id:8,name:"Mouse Ultra-light 8K",price:140,category:"PERIPHERALS",image:"assets/img/8.jpg"},{id:9,name:"Case Full Tower Glass",price:280,category:"CASE",image:"assets/img/9.jpg"}];let s=JSON.parse(localStorage.getItem("active_cart"))||[],i=JSON.parse(localStorage.getItem("currentUser"));const l=()=>{const a=new Audio("https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3");a.volume=.15,a.play().catch(()=>{})};window.saveProfile=()=>{const a=document.getElementById("prof-name").value,n=document.getElementById("prof-address").value,e=document.getElementById("prof-card").value,t=document.getElementById("prof-file"),r=o=>{i={...i,name:a,address:n,avatar:o||i.avatar,payment:e?`VISA **** ${e.slice(-4)}`:i.payment},localStorage.setItem("currentUser",JSON.stringify(i)),location.reload()};if(t.files&&t.files[0]){const o=new FileReader;o.onload=d=>r(d.target.result),o.readAsDataURL(t.files[0])}else r()};window.addToCart=a=>{const n=g.find(e=>e.id===Number(a));n&&(l(),s.push({...n,cartId:Date.now()+Math.random()}),p(),m(),document.getElementById("cart-panel").classList.add("active"))};window.removeFromCart=a=>{l(),s=s.filter(n=>n.cartId!==a),p(),m()};const p=()=>{localStorage.setItem("active_cart",JSON.stringify(s))},m=()=>{const a=document.getElementById("cart-items"),n=s.reduce((e,t)=>e+t.price,0);a.innerHTML=s.map(e=>`
        <div class="cart-item">
            <span>${e.name}</span>
            <div><strong>$${e.price}</strong> <button onclick="removeFromCart(${e.cartId})" class="delete-btn">‚úï</button></div>
        </div>`).join(""),document.getElementById("tax-val").innerText=`$${(n*.14).toFixed(2)}`,document.getElementById("total-val").innerText=`$${(n*1.14).toFixed(2)}`};window.deployOrder=async()=>{const a=JSON.parse(localStorage.getItem("currentUser"));if(s.length===0)return alert("Rig vac√≠o.");if(!a.address)return alert("Configura direcci√≥n en PERFIL."),window.openProfile();const n=document.getElementById("deploy-btn"),e=n.innerText;n.innerText="PROCESANDO DATOS...",n.disabled=!0,await new Promise(o=>setTimeout(o,1500));const t=JSON.parse(localStorage.getItem("orders")||"[]"),r={id:Math.floor(Math.random()*9e3)+1e3,userName:a.name,userEmail:a.email,userAvatar:a.avatar,address:a.address,payment:a.payment,date:new Date().toLocaleString(),items:[...s],total:s.reduce((o,d)=>o+d.price,0)*1.14,status:"Preparando"};t.push(r),localStorage.setItem("orders",JSON.stringify(t)),l(),s=[],p(),n.innerText=e,n.disabled=!1,m(),c("MY RIG")};const c=a=>{const n=document.getElementById("content-area");if(document.getElementById("cart-panel").classList.remove("active"),a==="STORE")n.innerHTML=`<h1 class="neon-text">Elite Hardware</h1><div class="grid">${g.map(e=>`
            <div class="p-card">
                <div class="p-img-container">
                    <img src="${e.image}" class="p-img" onerror="this.src='https://via.placeholder.com/150/000/00f3ff?text=COMPONENT'">
                </div>
                <h3>${e.name}</h3><p class="p-price">$${e.price}</p>
                <button class="btn-primary" onclick="addToCart(${e.id})">A√ëADIR AL RIG</button>
            </div>`).join("")}</div>`;else if(a==="MY RIG"){const e=JSON.parse(localStorage.getItem("orders")||"[]").filter(t=>t.userEmail===i.email);n.innerHTML='<h1 class="neon-text">Mi Historial</h1>'+e.reverse().map(t=>`
            <div class="p-card" style="display:flex; justify-content:space-between; margin-bottom:10px; align-items:center;">
                <div><h3>ORDEN #${t.id}</h3><p>ESTADO: <span style="color:var(--neon-cyan)">${t.status.toUpperCase()}</span></p></div>
                <button onclick="viewOrderDetails(${t.id})" class="btn-primary" style="width:auto; padding:5px 15px;">DETALLES</button>
            </div>`).join("")}else if(a==="ADMIN"&&i.role==="admin"){const e=JSON.parse(localStorage.getItem("orders")||"[]");n.innerHTML=`<h1 class="neon-text">Admin Hub</h1><div class="grid">${e.reverse().map(t=>`
            <div class="p-card">
                <div style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
                    <img src="${t.userAvatar}" style="width:35px; height:35px; border-radius:50%; object-fit:cover; border:1px solid var(--neon-magenta)">
                    <h3>${t.userName}</h3>
                </div>
                <select onchange="updateOrderStatus(${t.id}, this.value)" class="input-futuristic" style="padding:5px; font-size:0.8rem;">
                    <option value="Preparando" ${t.status==="Preparando"?"selected":""}>PREPARANDO</option>
                    <option value="Enviado" ${t.status==="Enviado"?"selected":""}>ENVIADO</option>
                    <option value="Entregado" ${t.status==="Entregado"?"selected":""}>ENTREGADO</option>
                </select>
                <button onclick="viewOrderDetails(${t.id})" class="btn-primary" style="margin-top:10px;">DETALLES</button>
            </div>`).join("")}</div>`}};window.updateOrderStatus=(a,n)=>{let e=JSON.parse(localStorage.getItem("orders")||"[]");e=e.map(t=>t.id===a?{...t,status:n}:t),localStorage.setItem("orders",JSON.stringify(e)),l(),c("ADMIN")};window.viewOrderDetails=a=>{const e=JSON.parse(localStorage.getItem("orders")||"[]").find(t=>t.id===a);document.getElementById("modal-body").innerHTML=`
        <div style="background:rgba(0,0,0,0.5); padding:10px; border-radius:10px; margin-bottom:15px; border:1px solid var(--neon-cyan);">
            <p>üìç ENV√çO: ${e.address}</p><p>üí≥ PAGO: ${e.payment}</p><p>üõ∞Ô∏è STATUS: ${e.status}</p>
        </div>`+e.items.map(t=>`<div style="display:flex; justify-content:space-between;"><span>${t.name}</span><strong>$${t.price}</strong></div>`).join(""),document.getElementById("modal-title").innerText=`ORDEN #${e.id}`,document.getElementById("modal-footer-info").innerHTML=`<h3 style="color:var(--neon-magenta)">TOTAL: $${e.total.toFixed(2)}</h3>`,document.getElementById("order-modal").style.display="flex"};document.getElementById("enter-btn").onclick=()=>{const a=document.getElementById("login-name").value,n=document.getElementById("login-email").value,e=document.getElementById("login-role").value;if(!a||!n)return alert("Completa los datos.");i={name:a,email:n,role:e,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a}`,address:"",payment:""},localStorage.setItem("currentUser",JSON.stringify(i)),u()};document.getElementById("btn-shop").onclick=()=>c("STORE");document.getElementById("btn-orders").onclick=()=>c("MY RIG");document.getElementById("btn-profile").onclick=()=>{l(),document.getElementById("profile-modal").style.display="flex"};document.getElementById("btn-admin").onclick=()=>c("ADMIN");document.getElementById("deploy-btn").onclick=window.deployOrder;document.getElementById("logout-btn").onclick=()=>{localStorage.clear(),location.reload()};window.toggleCart=()=>{l(),document.getElementById("cart-panel").classList.toggle("active")};window.closeProfile=()=>document.getElementById("profile-modal").style.display="none";window.closeModal=()=>document.getElementById("order-modal").style.display="none";const u=()=>{i&&(document.getElementById("login-screen").style.display="none",document.getElementById("user-name").innerText=i.name,document.getElementById("user-avatar").src=i.avatar,document.getElementById("btn-admin").style.display=i.role==="admin"?"inline-block":"none",c("STORE"),m())};i&&u();
